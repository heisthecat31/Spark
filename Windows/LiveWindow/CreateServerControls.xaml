<UserControl x:Class="Spark.CreateServerControls"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:p="clr-namespace:Spark.Properties"
             xmlns:l="clr-namespace:Spark"
             xmlns:w="clr-namespace:Spark.Windows"
             xmlns:local="clr-namespace:Spark"
             mc:Ignorable="d"
             d:DesignHeight="900"
             d:DesignWidth="1400"
             Background="#2b2b2b"
             FontSize="16"
             DataContext="{Binding RelativeSource={RelativeSource Self}}">
    
    <UserControl.Resources>
        <Style x:Key="ServerCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#1e1e1e"/>
            <Setter Property="Margin" Value="10,6"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderBrush" Value="#404040"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        
        <Style x:Key="StatusBadgeStyle" TargetType="Border">
            <Setter Property="Background" Value="#10b981"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="6,2"/>
        </Style>
        
        <Style x:Key="TitleTextStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#ffffff"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        
        <Style x:Key="InfoTextStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#cccccc"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="9"/>
        </Style>
        
        <Style x:Key="ServerBrowserButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#232323"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2d2d2d"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>
        
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="20">
            <StackPanel>
                <Label Content="{x:Static p:Resources.Create_Server_in_Region}" 
                       HorizontalAlignment="Center"
                       VerticalAlignment="Top"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="#ffffff"
                       Margin="0,0,0,10"/>
                
                <TextBlock Text="{x:Static p:Resources.This_creates_a_private_match_in_a_region_of_your_choice_}"
                           TextWrapping="Wrap" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Top"
                           FontSize="14" 
                           Foreground="#cccccc" 
                           Margin="0,0,0,20"/>
                
                <Border Background="#232323" CornerRadius="8" Padding="15" Margin="0,0,0,15">
                    <StackPanel>
                        <Label Content="Region:" Foreground="#ffffff" FontWeight="Bold"/>
                        <ComboBox SelectedIndex="{l:SettingBinding chooseRegionIndex}" 
                                  Background="#1e1e1e"
                                  Foreground="#ffffff"
                                  BorderBrush="#404040"
                                  Height="54" 
                                  Margin="0,0,0,10">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <TextBlock Text="{Binding}" Foreground="#ffffff"/>
                                        <TextBlock FontSize="12" Foreground="#cccccc">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0}">
                                                    <Binding Path="Tag"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                            <ComboBoxItem Content="{x:Static p:Resources.US_Central_North}" Tag="Chicago, Illinois"/>
                            <ComboBoxItem Content="{x:Static p:Resources.US_Central_South}" Tag="Dallas, Texas"/>
                            <ComboBoxItem Content="US Central South 2" Tag="Houston, Texas"/>
                            <ComboBoxItem Content="{x:Static p:Resources.US_East}" Tag="{x:Static p:Resources.e_g__New_York__Miami__Charleston}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.US_West}" Tag="{x:Static p:Resources.e_g__California}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Europe}" Tag="{x:Static p:Resources.e_g__London__Amsterdam__Brussels}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Japan}" Tag="{x:Static p:Resources.e_g__Tokyo}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Australia}" Tag="{x:Static p:Resources.e_g__Sydney__Perth}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Singapore}" Tag="{x:Static p:Resources.e_g__Singapore}"/>
                        </ComboBox>
                        
                        <Label Content="Map:" Foreground="#ffffff" FontWeight="Bold"/>
                        <ComboBox SelectedIndex="{l:SettingBinding chooseMapIndex}" 
                                  Background="#1e1e1e"
                                  Foreground="#ffffff"
                                  BorderBrush="#404040"
                                  Height="32" 
                                  Margin="0,0,0,10">
                            <ComboBoxItem Content="{x:Static p:Resources.Arena}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Lobby}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Combat_Dyson}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Combat_Combustion}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Combat_Fission}"/>
                            <ComboBoxItem Content="{x:Static p:Resources.Combat_Surge}"/>
                        </ComboBox>
                        
                        <Label Content="Game Type:" Foreground="#ffffff" FontWeight="Bold"/>
                        <ComboBox SelectedIndex="{l:SettingBinding chooseGameTypeIndex}" 
                                  Background="#1e1e1e"
                                  Foreground="#ffffff"
                                  BorderBrush="#404040"
                                  Height="32" 
                                  Margin="0,0,0,10"
                                  ToolTip="Not all of these will work">
                            <ComboBoxItem Content="(default)"/>
                            <ComboBoxItem Content="Social_2.0_Private"/>
                            <ComboBoxItem Content="Social_2.0_NPE"/>
                            <ComboBoxItem Content="Social_2.0"/>
                            <ComboBoxItem Content="Echo_Arena"/>
                            <ComboBoxItem Content="Echo_Arena_Tournament"/>
                            <ComboBoxItem Content="Echo_Arena_Public_AI"/>
                            <ComboBoxItem Content="Echo_Arena_Practice_AI"/>
                            <ComboBoxItem Content="Echo_Arena_Private_AI"/>
                            <ComboBoxItem Content="Echo_Arena_First_Match"/>
                            <ComboBoxItem Content="Echo_Demo"/>
                            <ComboBoxItem Content="Echo_Demo_Public"/>
                            <ComboBoxItem Content="Echo_Arena_NPE"/>
                            <ComboBoxItem Content="Echo_Arena_Private"/>
                            <ComboBoxItem Content="Echo_Combat"/>
                            <ComboBoxItem Content="Echo_Combat_Tournament"/>
                            <ComboBoxItem Content="Echo_Combat_Private"/>
                            <ComboBoxItem Content="Echo_Combat_Public_AI"/>
                            <ComboBoxItem Content="Echo_Combat_Practice_AI"/>
                            <ComboBoxItem Content="Echo_Combat_Private_AI"/>
                            <ComboBoxItem Content="Echo_Combat_First_Match"/>
                        </ComboBox>
                        
                        <CheckBox x:Name="spectatorModeCheckbox" 
                                  Content="{x:Static p:Resources.Spectator_Mode}"
                                  ToolTip="{x:Static p:Resources.chooseRegionSpectator_ToolTip}"
                                  IsChecked="{l:SettingBinding chooseRegionSpectator}" 
                                  Foreground="#ffffff"
                                  Margin="0,10,0,5"/>
                        
                        <CheckBox Content="{x:Static p:Resources.noovrCheckbox_Content}"
                                  ToolTip="{x:Static p:Resources.Anonymous_accounts_allow_you_to_join_the_match_twice_on_the_same_computer_}"
                                  IsChecked="{l:SettingBinding chooseRegionNoOVR}" 
                                  Foreground="#ffffff"
                                  Margin="0,5,0,20"
                                  IsEnabled="{Binding ElementName=spectatorModeCheckbox, Path=IsChecked}"/>
                        
                        <Button Content="ðŸš€ LAUNCH SERVER" 
                                Click="Create"
                                Background="#4CAF50"
                                Foreground="White"
                                FontSize="12"
                                FontWeight="Bold"
                                Height="50"
                                Cursor="Hand"
                                BorderThickness="0"
                                Margin="0,0,0,10"/>
                    </StackPanel>
                </Border>
                
                <Border Background="#232323" CornerRadius="8" Padding="15">
                    <StackPanel>
                        <Label Content="OfflineEcho:" 
                               Foreground="#ffffff" 
                               FontWeight="Bold"
                               Margin="0,0,0,10"/>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Content="Install" 
                                    Click="InstallOfflineEcho" 
                                    Background="#2196F3"
                                    Foreground="White"
                                    FontSize="11"
                                    Padding="20,8"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Margin="0,0,10,0"
                                    Width="120"/>
                            
                            <Button Content="Remove" 
                                    Click="RemoveOfflineEcho" 
                                    Background="#f44336"
                                    Foreground="White"
                                    FontSize="11"
                                    Padding="20,8"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Width="120"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <Grid Grid.Column="1" Background="#2b2b2b" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <Border Grid.Row="0" Background="#232323" CornerRadius="8" Padding="15" Margin="0,0,0,15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="EchoVR Server Browser" 
                                   FontSize="24" 
                                   FontWeight="Bold"
                                   Foreground="#ffffff"/>
                        <TextBlock Text="Browse and join Echo Arena/Combat servers" 
                                   FontSize="11"
                                   Foreground="#cccccc"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Content="ðŸ”„ Refresh" 
                                Click="RefreshServers_Click"
                                Style="{StaticResource ServerBrowserButtonStyle}"
                                Margin="0,0,10,0"/>
                        
                        <Button Content="âš™ï¸ Settings" 
                                Click="ShowSettings_Click"
                                Background="#1e1e1e"
                                Foreground="#ffffff"
                                Padding="20,8"
                                BorderThickness="0"
                                Cursor="Hand"
                                Margin="0,0,20,0"/>
                        
                        <Ellipse x:Name="StatusIndicator" Width="12" Height="12" Fill="#ef4444" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <TextBlock x:Name="StatusTextBlock" 
                                   Text="Disconnected"
                                   Foreground="#cccccc"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <Grid Grid.Row="1" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" 
                        Background="#232323" 
                        CornerRadius="8" 
                        Margin="0,0,15,0"
                        BorderBrush="#404040"
                        BorderThickness="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <Border Grid.Row="0" 
                                Background="#1e1e1e" 
                                CornerRadius="8,8,0,0"
                                Padding="15">
                            <Grid>
                                <TextBlock Text="Available Servers" 
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Foreground="#ffffff"
                                           VerticalAlignment="Center"/>
                                
                                <TextBlock x:Name="ServerCountLabel" 
                                           Text="0 servers"
                                           FontSize="11"
                                           Foreground="#cccccc"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Right"/>
                            </Grid>
                        </Border>
                        
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <ItemsControl x:Name="ServerListControl">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource ServerCardStyle}" 
                                                MouseLeftButtonDown="ServerCard_MouseLeftButtonDown">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                
                                                <Grid Grid.Row="0" Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <TextBlock Grid.Column="0" 
                                                               Text="{Binding DisplayName}"
                                                               Style="{StaticResource TitleTextStyle}"
                                                               Cursor="Hand"/>
                                                    
                                                    <Border Grid.Column="1" Style="{StaticResource StatusBadgeStyle}">
                                                        <TextBlock Text="{Binding StatusText}" 
                                                                   Foreground="White"
                                                                   FontSize="8"
                                                                   FontWeight="Bold"/>
                                                    </Border>
                                                </Grid>
                                                
                                                <Grid Grid.Row="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <TextBlock Grid.Column="0" 
                                                               Text="{Binding PlayerCountText}"
                                                               Style="{StaticResource InfoTextStyle}"/>
                                                    
                                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                        <TextBlock Text="{Binding BlueScore}"
                                                                   Foreground="#60a5fa"
                                                                   FontSize="9"
                                                                   FontWeight="Bold"/>
                                                        <TextBlock Text=" - " 
                                                                   Foreground="#ffffff"
                                                                   FontSize="9"/>
                                                        <TextBlock Text="{Binding OrangeScore}"
                                                                   Foreground="#fb923c"
                                                                   FontSize="9"
                                                                   FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Grid>
                                                
                                                <Button Grid.Row="2" 
                                                        Content="Spectate â†’"
                                                        Click="QuickJoinButton_Click"
                                                        HorizontalAlignment="Right"
                                                        Background="#232323"
                                                        Foreground="White"
                                                        FontSize="9"
                                                        Padding="15,4"
                                                        BorderThickness="0"
                                                        Cursor="Hand"
                                                        Margin="0,8,0,0"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>
                
                <Border Grid.Column="1" 
                        Background="#232323" 
                        CornerRadius="8"
                        BorderBrush="#404040"
                        BorderThickness="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <Border Grid.Row="0" 
                                Background="#1e1e1e" 
                                CornerRadius="8,8,0,0"
                                Padding="15">
                            <TextBlock Text="Server Details" 
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#ffffff"/>
                        </Border>
                        
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <Border Background="#1e1e1e" Padding="20,25">
                                <StackPanel x:Name="ServerDetailsPanel">
                                    <TextBlock Text="Select a server to view details" 
                                               FontSize="14"
                                               Foreground="#cccccc"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Margin="0,100,0,0"/>
                                </StackPanel>
                            </Border>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
            
            <Border Grid.Row="2" 
                    Background="#232323" 
                    CornerRadius="8" 
                    Padding="15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock x:Name="UpdateLabel" 
                               Text="Last update: Never"
                               FontSize="9"
                               Foreground="#999999"
                               VerticalAlignment="Center"/>
                    
                    <TextBlock x:Name="ApiStatusLabel" 
                               Grid.Column="1"
                               Text="API: Disconnected"
                               FontSize="9"
                               Foreground="#ef4444"
                               VerticalAlignment="Center"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>
